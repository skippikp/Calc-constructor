(this["webpackJsonpcalc-constructor"]=this["webpackJsonpcalc-constructor"]||[]).push([[0],{56:function(e,n,t){},58:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},62:function(e,n,t){},63:function(e,n,t){},64:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(30),c=t.n(a),o=t(11),l=t(10),i="ADD_DIGIT",u="CHOOSE_OPERATION",s="SET_BLOCKS",d="SET_DRAGGABLE_BLOCK",b="EVALUATE",O="DRAG_END",p="DRAG_START",j="SET_DROPPABLE_SECTION",g="CHANGE_CONSTRUCTOR_MODE",f=function(e){return{type:s,payload:e}},v=function(){return{type:O}},m=function(e){return{type:j,payload:e}},k=t(16),h=(t(56),t(3)),x={dragging:function(e){return{type:p,payload:e}},setDroppableSection:m,dragEnd:v,setBlocks:f},D=Object(k.b)((function(e){var n=e.drag,t=n.draggableBlock,r=n.droppableSection,a=n.blocks;return{draggableBlock:t,droppableSection:r,constructorModeEnable:e.calc.constructorModeEnable,blocks:a}}),x)((function(e){e.draggableBlock;var n=e.droppableSection,t=e.dragging,a=e.constructorModeEnable,c=e.setDroppableSection,i=e.dragEnd,u=e.blocks,s=e.setBlocks,d=Object(r.useState)(null),b=Object(l.a)(d,2),O=b[0],p=b[1],j=function(e){if(e.preventDefault(),n){var t=[].concat(Object(o.a)(u.slice(0,O)),Object(o.a)(u.slice(O+1)));s(t),c(null)}i(),e.target.style.visibility="visible"};return Object(h.jsx)("div",{className:"calc-palete d-flex flex-column",children:u.map((function(e){return Object(h.jsx)(e.component,{draggable:a,onDragStart:function(n){return function(e,n){var r=u.indexOf(n);a&&(p(r),t(n),setTimeout((function(){return e.target.style.visibility="hidden"}),50))}(n,e)},onDragEnd:j},e.id)}))})})),y=t(85),E=t(83),N=t(82),S=(t(58),{setDroppableSection:m,changeConstructorMode:function(){return{type:g}},dragEnd:v,setBlocks:f,setDraggableBlock:function(e){return{type:d,payload:e}}}),B=Object(k.b)((function(e){var n=e.drag,t=n.draggableBlock,r=n.blocks;return{draggableBlock:t,constructorModeEnable:e.calc.constructorModeEnable,blocks:r}}),S)((function(e){var n=e.draggableBlock,t=e.setDroppableSection,a=e.changeConstructorMode,c=e.constructorModeEnable,i=e.blocks,u=e.setBlocks,s=e.setDraggableBlock,d=Object(r.useState)([{id:1,section:"top",items:[]},{id:2,section:"middle",items:[]},{id:3,section:"bottom",items:[]}]),b=Object(l.a)(d,2),O=b[0],p=b[1],j=Object(r.useState)(!1),g=Object(l.a)(j,2),f=g[0],m=g[1];return Object(h.jsxs)("div",{className:"right-side",children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(E.a,{control:Object(h.jsx)(N.a,{onChange:a,defaultChecked:!0}),label:"Constructor Mode ".concat(c?"On":"Off")})}),Object(h.jsxs)("div",{className:"desk",children:[O.map((function(e){return Object(h.jsx)("div",{onDragOver:function(r){return function(e,r){e.preventDefault(),n&&("desk-item"===e.target.className&&(e.target.style.backgroundColor="rgba(0, 159, 249, 0.4)"),t(r))}(r,e)},onDragLeave:function(e){return function(e){e.preventDefault(),"desk-item"===e.target.className&&(e.target.style.backgroundColor=""),t(null)}(e)},onDrop:function(t){return function(e,t){if(e.preventDefault(),"desk-item"===e.target.className&&(e.target.style.backgroundColor=""),n){var r=O.indexOf(t);p((function(e){var t=e.slice();return t[r].items.push(n),t})),v(),m(!0)}}(t,e)},className:"desk-item",children:e.items.map((function(n){return Object(h.jsx)(n.component,{onDblClick:function(){return function(e,n){if(c){s(e);var t=n.items.indexOf(e),r=O.findIndex((function(e){return e.section===n.section})),a=[].concat(Object(o.a)(i.slice(0,e.id-1)),[e],Object(o.a)(i.slice(e.id-1)));p((function(e){var n=e.slice();return n[r].items.splice(t,1),n})),u(a),s(null)}}(n,e)},draggable:!1},n.id)}))},e.id)})),f?null:Object(h.jsxs)("h5",{className:"deskInfo",children:["\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430",Object(h.jsx)("p",{children:"\u043b\u044e\u0431\u043e\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u043f\u0430\u043d\u0435\u043b\u0438"})]})]})]})}));t(59);var C=function(){return Object(h.jsxs)("div",{className:"container mt-5 d-flex justify-content-evenly align-items-center",children:[Object(h.jsx)(D,{}),Object(h.jsx)(B,{})]})},M=t(34),_=t(6),T={currentOperand:null,previousOperand:null,operation:null,evaluated:!1,constructorModeEnable:!0},A=function(e){var n=e.currentOperand,t=e.previousOperand,r=e.operation,a=parseFloat(t),c=parseFloat(n);if(isNaN(a)||isNaN(c))return"0";var o="";switch(r){case"+":o=a+c;break;case"-":o=a-c;break;case"/":o=a/c;break;case"x":o=a*c;break;default:return""}return o.toString()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.payload;switch(t){case g:return Object(_.a)(Object(_.a)({},e),{},{constructorModeEnable:!e.constructorModeEnable});case i:return e.constructorModeEnable?e:null===e.currentOperand&&"."===r?Object(_.a)(Object(_.a)({},e),{},{currentOperand:"0."}):e.evaluated||null===e.currentOperand&&"."!==r?Object(_.a)(Object(_.a)({},e),{},{currentOperand:r,evaluated:!1}):11===e.currentOperand.length?e:"0"!==r||null!==e.currentOperand&&"0"!==e.currentOperand?"."===r&&e.currentOperand.includes(".")?e:Object(_.a)(Object(_.a)({},e),{},{currentOperand:"".concat(e.currentOperand).concat(r)}):e;case u:return e.constructorModeEnable||null===e.currentOperand&&null==e.previousOperand?e:!e.evaluated&&null===e.currentOperand||e.evaluated&&e.currentOperand===e.previousOperand||e.previousOperand&&null===e.currentOperand&&e.operation?Object(_.a)(Object(_.a)({},e),{},{operation:r}):null==e.previousOperand?Object(_.a)(Object(_.a)({},e),{},{operation:r,previousOperand:e.currentOperand,currentOperand:null}):Object(_.a)(Object(_.a)({},e),{},{currentOperand:A(e),previousOperand:A(e),evaluated:!0,operation:r});case b:return e.constructorModeEnable||(null===e.operation||null===e.currentOperand||null===e.previousOperand)?e:Object(_.a)(Object(_.a)({},e),{},{evaluated:!0,currentOperand:A(e),previousOperand:null,operation:null});default:return e}},I=function(e){var n=e.className,t=e.value,r=e.onClick;return Object(h.jsx)("div",{onClick:r,className:n,children:t})},G=t(43),L=["onDragStart","onDragEnd","draggable","onDblClick"],w=function(e){return function(n){var t=n.onDragStart,r=n.onDragEnd,a=n.draggable,c=n.onDblClick,o=Object(G.a)(n,L);return Object(h.jsx)("div",{onDragStart:t,onDragEnd:r,draggable:a,onDoubleClick:c,children:Object(h.jsx)(e,Object(_.a)({},o))})}},q=(t(60),["1","2","3","4","5","6","7","8","9","0","."]),P={addDigit:function(e){return{type:i,payload:e}}},F=Object(k.b)(null,P)(w((function(e){var n=e.addDigit;return Object(h.jsx)("div",{className:"digital-block",children:q.map((function(e){return Object(h.jsx)(I,{value:e,className:"btn btn-outline-secondary numbers_".concat(e),onClick:function(){return n(e)}},e)}))})}))),H=(t(61),Object(k.b)((function(e){return{currentOperand:e.calc.currentOperand}}))(w((function(e){var n=e.currentOperand;return Object(h.jsx)("div",{className:"display",children:Object(h.jsx)("div",{className:"display_text-field",children:(null===n||void 0===n?void 0:n.length)>11?Object(h.jsx)("h6",{children:"".concat(n.slice(0,21).toString(),"\n").concat(n.slice(21).toString())}):Object(h.jsx)("h3",{children:n||"0"})})})})))),J=(t(62),{evaluate:function(){return{type:b}}}),K=Object(k.b)(null,J)(w((function(e){var n=e.evaluate;return Object(h.jsx)("div",{className:"equal",children:Object(h.jsx)("div",{onClick:n,className:"equal_btn btn btn-primary",children:"="})})}))),U=(t(63),{chooseOperation:function(e){return{type:u,payload:e}}}),V={isDraging:!1,draggableBlock:null,droppableSection:null,blocks:[{id:1,name:"display",component:H},{id:2,name:"operations",component:Object(k.b)(null,U)(w((function(e){var n=e.chooseOperation;return Object(h.jsx)("div",{className:"operations",children:["/","x","-","+"].map((function(e){return Object(h.jsx)(I,{className:"btn btn-outline-secondary",value:e,onClick:function(){return n(e)}},e)}))})})))},{id:3,name:"digitalBlock",component:F},{id:4,name:"equalBlock",component:K}]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.payload;switch(t){case s:return Object(_.a)(Object(_.a)({},e),{},{blocks:r});case p:return e.draggableBlock===r?Object(_.a)({},e.drag):Object(_.a)(Object(_.a)({},e),{},{isDraging:!0,draggableBlock:r});case O:return Object(_.a)(Object(_.a)({},e),{},{isDraging:!1,draggableBlock:null});case j:return Object(_.a)(Object(_.a)({},e),{},{droppableSection:r});case d:return Object(_.a)(Object(_.a)({},e),{},{draggableBlock:r});default:return e}},Q=Object(M.a)({calc:R,drag:z}),W=Object(M.b)(Q);c.a.render(Object(h.jsx)(k.a,{store:W,children:Object(h.jsx)(C,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.fc8967ee.chunk.js.map