(this["webpackJsonpcalc-constructor"]=this["webpackJsonpcalc-constructor"]||[]).push([[0],{55:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},62:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(30),a=t.n(c),o=t(9),l=t(11),u=function(e){return{type:"ADD_DIGIT",payload:e}},i=function(e){return{type:"SET_BLOCKS",payload:e}},d=function(e){return{type:"SET_DROPPABLE_SECTION",payload:e}},s=t(14),b=(t(55),t(3)),O=Object(s.b)((function(e){var n=e.drag;return{draggableBlock:n.draggableBlock,droppableSection:n.droppableSection,constructorModeEnable:n.constructorModeEnable,blocks:n.blocks}}),(function(e){return{dragging:function(n){return e({type:"DRAG_START",payload:n})},setDroppableSection:function(n){return e(d(n))},dragEnd:function(){return e({type:"DRAG_END"})},setBlocks:function(n){return e(i(n))}}}))((function(e){var n=e.draggableBlock,t=e.droppableSection,c=e.dragging,a=e.constructorModeEnable,u=e.setDroppableSection,i=e.dragEnd,d=e.blocks,s=e.setBlocks,O=Object(r.useState)(null),g=Object(l.a)(O,2),p=g[0],f=g[1];return Object(b.jsx)("div",{className:"calc-palete d-flex flex-column",children:d.map((function(e){return Object(b.jsx)(e.component,{draggable:a,onDragOver:function(e){return function(e){e.preventDefault()}(e)},onDragStart:function(n){return function(e,n){var t=d.indexOf(n);a&&(f(t),c(n),setTimeout((function(){return e.target.style.visibility="hidden"}),50))}(n,e)},onDragEnd:function(e){return function(e){if(e.preventDefault(),t){var n=[].concat(Object(o.a)(d.slice(0,p)),Object(o.a)(d.slice(p+1)));s(n),u(null)}i(),e.target.style.visibility="visible"}(e)},onDrop:function(e){return function(e){if(e.preventDefault(),!t){var r=[].concat(Object(o.a)(d.slice(0,p-1)),[n],Object(o.a)(d.slice(p)));s(r)}}(e)}},e.id)}))})})),g=t(84),p=t(82),f=t(81),j=(t(57),Object(s.b)((function(e){var n=e.drag;return{draggableBlock:n.draggableBlock,constructorModeEnable:n.constructorModeEnable,blocks:n.blocks}}),(function(e){return{setDroppableSection:function(n){return e(d(n))},changeConstructorMode:function(){return e({type:"CHANGE_CONSTRUCTOR_MODE"})},dragEnd:function(){return e({type:"DRAG_END"})},setBlocks:function(n){return e(i(n))},setDraggableBlock:function(n){return e({type:"SET_DRAGGABLE_BLOCK",payload:n})}}}))((function(e){var n=e.draggableBlock,t=e.setDroppableSection,c=e.changeConstructorMode,a=e.constructorModeEnable,u=e.blocks,i=e.setBlocks,d=e.setDraggableBlock,s=Object(r.useState)([{id:1,section:"top",items:[]},{id:2,section:"middle",items:[]},{id:3,section:"bottom",items:[]}]),O=Object(l.a)(s,2),j=O[0],v=O[1],D=Object(r.useState)(!1),k=Object(l.a)(D,2),m=k[0],E=k[1];return Object(b.jsxs)("div",{className:"right-side",children:[Object(b.jsx)(g.a,{children:Object(b.jsx)(p.a,{control:Object(b.jsx)(f.a,{onChange:c,defaultChecked:!0}),label:"Constructor Mode ".concat(a?"On":"Off")})}),Object(b.jsxs)("div",{className:"desk",children:[j.map((function(e){return Object(b.jsx)("div",{onDragOver:function(n){return function(e,n){e.preventDefault(),"desk-item"===e.target.className&&(e.target.style.backgroundColor="rgba(0, 159, 249, 0.4)"),t(n)}(n,e)},onDragLeave:function(e){return function(e){e.preventDefault(),"desk-item"===e.target.className&&(e.target.style.backgroundColor=""),t(null)}(e)},onDrop:function(t){return function(e,t){if(e.preventDefault(),"desk-item"===e.target.className&&(e.target.style.backgroundColor=""),n){var r=j.indexOf(t);v((function(e){var t=e.slice();return t[r].items.push(n),t})),E(!0)}}(t,e)},className:"desk-item",children:e.items.map((function(n){return Object(b.jsx)(n.component,{onDblClick:function(){return function(e,n){if(a){d(e);var t=n.items.indexOf(e),r=j.findIndex((function(e){return e.section===n.section})),c=[].concat(Object(o.a)(u.slice(0,e.id-1)),[e],Object(o.a)(u.slice(e.id-1)));v((function(e){var n=e.slice();return n[r].items.splice(t,1),n})),i(c),d(null)}}(n,e)},draggable:!1},n.id)}))},e.id)})),m?null:Object(b.jsxs)("h5",{className:"deskInfo",children:["\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430",Object(b.jsx)("p",{children:"\u043b\u044e\u0431\u043e\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u043f\u0430\u043d\u0435\u043b\u0438"})]})]})]})})));t(58);var v=function(){return Object(b.jsxs)("div",{className:"container mt-5 d-flex justify-content-evenly align-items-center",children:[Object(b.jsx)(O,{}),Object(b.jsx)(j,{})]})},D=t(41),k=t(6),m={currentOperand:null,previousOperand:null,operation:null,evaluated:!1},E=function(e){var n=e.calc,t=n.currentOperand,r=n.previousOperand,c=n.operation,a=parseFloat(r),o=parseFloat(t);if(isNaN(a)||isNaN(o))return"0";var l="";switch(c){case"+":l=a+o;break;case"-":l=a-o;break;case"/":l=a/o;break;case"x":l=a*o;break;default:return""}return l.toString()},S=function(e,n){var t=n.type,r=n.payload;if(void 0===e)return m;switch(t){case"ADD_DIGIT":return e.drag.constructorModeEnable?e.calc:e.calc.evaluated||null===e.calc.currentOperand&&"."!==r?Object(k.a)(Object(k.a)({},e.calc),{},{currentOperand:r,evaluated:!1}):11===e.calc.currentOperand.length||"0"===r&&null===e.calc.currentOperand||"."===r&&e.calc.currentOperand.includes(".")?e.calc:Object(k.a)(Object(k.a)({},e.calc),{},{currentOperand:"".concat(e.calc.currentOperand).concat(r)});case"CHOOSE_OPERATION":return e.drag.constructorModeEnable||null===e.calc.currentOperand&&null==e.calc.previousOperand?e.calc:!e.calc.evaluated&&null===e.calc.currentOperand||e.calc.evaluated&&e.calc.currentOperand===e.calc.previousOperand?Object(k.a)(Object(k.a)({},e.calc),{},{operation:r}):null==e.calc.previousOperand?Object(k.a)(Object(k.a)({},e.calc),{},{operation:r,previousOperand:e.calc.currentOperand,currentOperand:null}):Object(k.a)(Object(k.a)({},e.calc),{},{currentOperand:E(e),previousOperand:E(e),evaluated:!0,operation:r});case"EVALUATE":return e.drag.constructorModeEnable||(null===e.calc.operation||null===e.calc.currentOperand||null===e.calc.previousOperand)?e.calc:Object(k.a)(Object(k.a)({},e.calc),{},{evaluated:!0,currentOperand:E(e),previousOperand:null,operation:null});default:return e.calc}},x=Object(s.b)((function(){return{}}),(function(e){return{addDigit:function(n){e(u(n))}}}))((function(e){var n=e.className,t=e.value,r=e.clickHandle;return Object(b.jsx)("div",{onClick:r,className:n,children:t})})),y=(t(59),Object(s.b)((function(e){return e}),(function(e){return{addDigit:function(n){e(u(n))}}}))((function(e){var n=e.onDragEnd,t=e.onDragStart,r=e.addDigit,c=e.draggable,a=e.onDblClick;return Object(b.jsx)("div",{onDragEnd:n,onDragStart:t,draggable:c,className:"digital-block",onDoubleClick:a,children:["1","2","3","4","5","6","7","8","9","0","."].map((function(e){return Object(b.jsx)(x,{value:e,className:"btn btn-outline-secondary numbers_".concat(e),clickHandle:function(){return r(e)}},e)}))})}))),h=(t(60),Object(s.b)((function(e){return{currentOperand:e.calc.currentOperand}}))((function(e){var n=e.onDragStart,t=e.onDragEnd,r=e.currentOperand,c=e.draggable,a=void 0===c||c,o=e.onDblClick;return Object(b.jsx)("div",{onDragStart:n,onDragEnd:t,onDoubleClick:o,draggable:a,className:"display",children:Object(b.jsx)("div",{className:"display_text-field",children:Object(b.jsx)("h3",{children:r||"0"})})})}))),N=(t(61),Object(s.b)((function(){return{}}),(function(e){return{evaluate:function(){return e({type:"EVALUATE"})}}}))((function(e){var n=e.onDragStart,t=e.onDragEnd,r=e.evaluate,c=e.draggable,a=void 0===c||c,o=e.onDblClick;return Object(b.jsx)("div",{onDragStart:n,onDragEnd:t,draggable:a,onDoubleClick:o,className:"equal",children:Object(b.jsx)("div",{onClick:r,className:"equal_btn btn btn-primary",children:"="})})}))),C=(t(62),{isDraging:!1,draggableBlock:null,droppableSection:null,constructorModeEnable:!0,blocks:[{id:1,name:"display",component:h},{id:2,name:"operations",component:Object(s.b)((function(){return{}}),(function(e){return{chooseOperation:function(n){e({type:"CHOOSE_OPERATION",payload:n})}}}))((function(e){var n=e.onDragStart,t=e.onDragEnd,r=e.chooseOperation,c=e.draggable,a=void 0===c||c,o=e.onDblClick;return Object(b.jsx)("div",{onDragStart:n,onDragEnd:t,onDoubleClick:o,draggable:a,className:"operations ",children:["/","x","-","+"].map((function(e){return Object(b.jsx)(x,{className:"btn btn-outline-secondary",value:e,clickHandle:function(){return r(e)}},e)}))})}))},{id:3,name:"digitalBlock",component:y},{id:4,name:"equalBlock",component:N}]}),B=function(e,n){var t=n.type,r=n.payload;if(void 0===e)return C;switch(t){case"SET_BLOCKS":return Object(k.a)(Object(k.a)({},e.drag),{},{blocks:r});case"DRAG_START":return e.drag.draggableBlock===r?Object(k.a)({},e.drag):Object(k.a)(Object(k.a)({},e.drag),{},{isDraging:!0,draggableBlock:r});case"DRAG_END":return Object(k.a)(Object(k.a)({},e.drag),{},{isDraging:!1,draggableBlock:null});case"SET_DROPPABLE_SECTION":return Object(k.a)(Object(k.a)({},e.drag),{},{droppableSection:r});case"SET_DRAGGABLE_BLOCK":return Object(k.a)(Object(k.a)({},e.drag),{},{draggableBlock:r});case"CHANGE_CONSTRUCTOR_MODE":return Object(k.a)(Object(k.a)({},e.drag),{},{constructorModeEnable:!e.drag.constructorModeEnable});default:return e.drag}},_=function(e,n){return{calc:S(e,n),drag:B(e,n)}},A=Object(D.a)(_);a.a.render(Object(b.jsx)(s.a,{store:A,children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.d3dcf147.chunk.js.map